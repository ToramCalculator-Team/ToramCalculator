id,condition,elementLogic,castingRange,effectiveRange,motionFixed,motionModified,chantingFixed,chantingModified,reservoirFixed,reservoirModified,startupFrames,hpCost,mpCost,description,logic,details,belongToskillId
defaultSkillEffectId,true,mainWeapon.element,mainWeapon.range,3,13,48,0,0,0,0,0.3,0,100,null,"{""blocks"": {""blocks"": [{""x"": -862, ""y"": -362, ""id"": ""BsFK8,PgtaH0SXb489F8"", ""type"": ""procedures_defreturn"", ""icons"": {""comment"": {""text"": ""è®¡ç®—é€ æˆçš„ä¼¤å®³"", ""width"": 160, ""height"": 80, ""pinned"": false}}, ""fields"": {""NAME"": ""damage""}, ""inputs"": {""STACK"": {""block"": {""id"": ""d/bYO7aebJS*d7.6v2a,"", ""next"": {""block"": {""id"": ""xymw`J-y{BC:D_5Zub5o"", ""next"": {""block"": {""id"": ""S0X^|[.-I(c(`q+V?p28"", ""type"": ""variables_set"", ""fields"": {""VAR"": {""id"": ""pR-IaEy4u/vWANDxMJ7y""}}, ""inputs"": {""VALUE"": {""block"": {""id"": ""Pd;UdKH+e}75;gyCz3Se"", ""type"": ""math_number"", ""fields"": {""NUM"": 1.5}}}}}}, ""type"": ""variables_set"", ""fields"": {""VAR"": {""id"": ""J$32)pec.ld]-pBeF}6p""}}, ""inputs"": {""VALUE"": {""block"": {""id"": ""#*h~8~TrncsmYL9ulnj4"", ""type"": ""math_number"", ""fields"": {""NUM"": 100}}}}}}, ""type"": ""variables_set"", ""fields"": {""VAR"": {""id"": ""kO;W!3)w+UcU(lzFWG7$""}}, ""inputs"": {""VALUE"": {""block"": {""id"": ""X2a^WWS=bs^%4T2rnu!V"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MINUS""}, ""inputs"": {""A"": {""block"": {""id"": ""{*s0Hct/FYP/$E?*$*g~"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MULTIPLY""}, ""inputs"": {""A"": {""block"": {""id"": ""preD1=76yFA?M*zGxi.*"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""ADD""}, ""inputs"": {""A"": {""block"": {""id"": ""%jxOwJE`rim?}{jbBiR%"", ""type"": ""self_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""lv""}}, ""shadow"": {""id"": ""4D;1EzrIJMsje)BNWl`z"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""^ea1qsj:^;9ICv%pW[lL"", ""type"": ""self_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""lv""}}, ""shadow"": {""id"": ""MZ^XP1q^Iu*!3qHQ`W(6"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""SngsU_N`wxr)]%=~pIH;"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""o]MWU6[DSr^ZTwA1k,ZB"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MINUS""}, ""inputs"": {""A"": {""shadow"": {""id"": ""E**I@~p=!ec-nk+^mX*m"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""9HW?59Wu=oc#;0XKyFUI"", ""type"": ""target_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""red.p""}}, ""shadow"": {""id"": ""t^$#PTs4@OV.o#NTOe{Y"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""D~_~349~Y6=E7H4.Qi=X"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""ac4D1.z4mL^DWJ5T|V]z"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""3*_o:]t).b=-gNrNv;if"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MULTIPLY""}, ""inputs"": {""A"": {""block"": {""id"": ""WflYRG(MwZMtKmsH(A@+"", ""type"": ""target_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""def.p""}}, ""shadow"": {""id"": ""*T^@olOCxW:ZL$}b}-|`"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""yrPfne,W-J1A4$o7?%Oh"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MINUS""}, ""inputs"": {""A"": {""shadow"": {""id"": ""+W}:0eBpJnShUNssZx,L"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""5grY9W3gy.@(nc[-BKeo"", ""type"": ""self_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""pie.p""}}, ""shadow"": {""id"": ""Kq~CywB+F$}w{}-=_b[C"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""0m[1AGtLp%:A6a:wbW5h"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""TL1-%.[z3.YPU_:A`,Ut"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}}}}}, ""RETURN"": {""block"": {""id"": ""GWrJf;Ni=LAXngY}B;*g"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MULTIPLY""}, ""inputs"": {""A"": {""block"": {""id"": ""|nhzW~H)FssK~+?Y`^rv"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""ADD""}, ""inputs"": {""A"": {""block"": {""id"": ""t1UJX{xUatZpB@g,O1(|"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": ""kO;W!3)w+UcU(lzFWG7$""}}}, ""shadow"": {""id"": ""Tp6mO+qw=m.]B667.9;^"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""(GM$$R;M{3U@sl2s|#Gg"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": ""J$32)pec.ld]-pBeF}6p""}}}, ""shadow"": {""id"": ""qA_g0)L/Z!9l7UR_eyH$"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""MhqU(4({s+P|jl2l-uH^"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""qh}$fVg.XemQik|xfa:9"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": ""pR-IaEy4u/vWANDxMJ7y""}}}, ""shadow"": {""id"": ""yk({j-.lFWCxg%hGtBPc"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}}}}, {""x"": -862, ""y"": -137, ""id"": ""0wT{TqcDskB[2_Ono6*}"", ""type"": ""procedures_defreturn"", ""icons"": {""comment"": {""text"": ""åˆ¤æ–­æ˜¯å¦å‘½ä¸­"", ""width"": 160, ""height"": 80, ""pinned"": false}}, ""fields"": {""NAME"": ""isHit""}, ""inputs"": {""STACK"": {""block"": {""id"": ""My=KQr4.cs[o1wmSkPX!"", ""type"": ""variables_set"", ""fields"": {""VAR"": {""id"": "")dzOA60J@jO+kK}nMBnY""}}, ""inputs"": {""VALUE"": {""block"": {""id"": ""Hnf|9zs+t_;$Z,]a[5^c"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""ADD""}, ""inputs"": {""A"": {""shadow"": {""id"": ""u#dL^vmObMy!t_avbqzc"", ""type"": ""math_number"", ""fields"": {""NUM"": 100}}}, ""B"": {""block"": {""id"": ""nC,eYM{-$l[/E]3ty3PZ"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""DIVIDE""}, ""inputs"": {""A"": {""block"": {""id"": ""~z+cx?pDx`O=2sD.#wN."", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""ADD""}, ""inputs"": {""A"": {""block"": {""id"": ""R_p%Fe}[BYu7JqvvGs]5"", ""type"": ""math_arithmetic"", ""fields"": {""OP"": ""MINUS""}, ""inputs"": {""A"": {""block"": {""id"": ""InRj[4^YXXC172+X{T|}"", ""type"": ""self_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""accuracy""}}, ""shadow"": {""id"": ""?Ff:($/+iC|6hRVZhX#)"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""cJRIc[BvH6F1);(TV3xS"", ""type"": ""target_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""avoid""}}, ""shadow"": {""id"": ""=(3FacAw56/ziw__}[VF"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""yv^6[.5(6=gcW,I7t!gy"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""block"": {""id"": ""xOi%wbrHo1)}#e-tAX`,"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": ""TK@G4W;!TLu3We:/}flf""}}}, ""shadow"": {""id"": ""c(cKFgUUCO-p]WRp%u`l"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}, ""shadow"": {""id"": ""5[FfW;+iAw]V/}K3F*kh"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}, ""B"": {""shadow"": {""id"": ""bDf?Z*UcJIYV}IF?7m^h"", ""type"": ""math_number"", ""fields"": {""NUM"": 3}}}}}, ""shadow"": {""id"": ""oi`2*QiXe|kK2i%Uk,:2"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}}}}}, ""RETURN"": {""block"": {""id"": ""T,(VO]3s*_;OGGPg7[~z"", ""type"": ""logic_compare"", ""fields"": {""OP"": ""GT""}, ""inputs"": {""A"": {""block"": {""id"": ""$U0-L1xA]9O13m2,.+O]"", ""type"": ""math_random_int"", ""inputs"": {""TO"": {""shadow"": {""id"": ""qRoz7V33N/)$k[ebZh!L"", ""type"": ""math_number"", ""fields"": {""NUM"": 100}}}, ""FROM"": {""shadow"": {""id"": ""m:_JD15%Y7$wRy}sZ2dR"", ""type"": ""math_number"", ""fields"": {""NUM"": 1}}}}}}, ""B"": {""block"": {""id"": ""|p/j]zZ28V_xbj`vcB[6"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": "")dzOA60J@jO+kK}nMBnY""}}}}}}}}}, {""x"": -862, ""y"": 38, ""id"": ""39FakA;Z=QWG])gI#AhB"", ""type"": ""procedures_defnoreturn"", ""icons"": {""comment"": {""text"": ""æè¿°è¯¥åŠŸèƒ½..."", ""width"": 160, ""height"": 80, ""pinned"": false}}, ""fields"": {""NAME"": ""main""}, ""inputs"": {""STACK"": {""block"": {""id"": ""OM]x4`yeI2:+sAf|8{zZ"", ""type"": ""controls_if"", ""inputs"": {""DO0"": {""block"": {""id"": ""j{[yAku{oN0zUBi0.$6}"", ""type"": ""controls_if"", ""inputs"": {""DO0"": {""block"": {""id"": ""{l]B)^@ny2VOA;T)ACfZ"", ""type"": ""target_attribute_fixed"", ""fields"": {""OPERATION"": ""SUBTRACT"", ""ATTRIBUTE_PATH"": ""hp.current""}, ""inputs"": {""VALUE"": {""block"": {""id"": ""p:GkKW0n7TK.j!UXNnv0"", ""type"": ""procedures_callreturn"", ""extraState"": {""name"": ""damage""}}}}}}, ""IF0"": {""block"": {""id"": ""3_%+376ozzFk;iqIc/|F"", ""type"": ""logic_compare"", ""fields"": {""OP"": ""EQ""}, ""inputs"": {""A"": {""block"": {""id"": ""KWVH;*nO,OW|CP{l^CFt"", ""type"": ""procedures_callreturn"", ""extraState"": {""name"": ""isHit""}}}, ""B"": {""block"": {""id"": ""qqz;)I@y5{L5GO,yj$$y"", ""type"": ""logic_boolean"", ""fields"": {""BOOL"": ""TRUE""}}}}}}}}}, ""IF0"": {""block"": {""id"": ""`%{SVyvl,5cN$uI#utoN"", ""type"": ""logic_compare"", ""fields"": {""OP"": ""GT""}, ""inputs"": {""A"": {""block"": {""id"": ""X%W(4h:!6QnQB7B.q}"", ""type"": ""self_attribute_get"", ""fields"": {""ATTRIBUTE_PATH"": ""hp.current""}}}, ""B"": {""block"": {""id"": ""x==XqRuLFY0W0A7Q]D1x"", ""type"": ""variables_get"", ""fields"": {""VAR"": {""id"": ""TK@G4W;!TLu3We:/}flf""}}}}}}}}}}}}, {""x"": -1137, ""y"": -362, ""id"": ""CQCS{{D=_gdcW`5FOf8A"", ""type"": ""variables_set"", ""fields"": {""VAR"": {""id"": ""TK@G4W;!TLu3We:/}flf""}}, ""inputs"": {""VALUE"": {""block"": {""id"": ""mQ2ZY1A/x|_jx-uUSd8N"", ""type"": ""math_number"", ""fields"": {""NUM"": 100}}}}}, {""x"": -1287, ""y"": -137, ""id"": ""~hPsT=gLSi_F#1*xh?I*"", ""type"": ""procedures_callnoreturn"", ""extraState"": {""name"": ""main""}}], ""languageVersion"": 0}, ""variables"": [{""id"": ""kO;W!3)w+UcU(lzFWG7$"", ""name"": ""æœ‰æ•ˆæ”»å‡»åŠ›""}, {""id"": ""J$32)pec.ld]-pBeF}6p"", ""name"": ""æŠ€èƒ½å¸¸æ•°""}, {""id"": ""pR-IaEy4u/vWANDxMJ7y"", ""name"": ""æŠ€èƒ½å€ç‡""}, {""id"": "")dzOA60J@jO+kK}nMBnY"", ""name"": ""å®é™…å‘½ä¸­ç‡""}, {""id"": ""TK@G4W;!TLu3We:/}flf"", ""name"": ""æŠ€èƒ½MPæ¶ˆè€—""}, {""id"": ""M$MiLF!ZK+//D#C%!C7m"", ""name"": ""ä¼¤å®³é‡""}]}",null,defaultSkillId
MagicCannonEffect1Id,true,mainWeapon.element,10,10,ctx.magicCannon?.phase == 1 ? 12 : 18,ctx.magicCannon?.phase == 1 ? 170 : 31,0,0,0,0,0,0,self.buffManager.hasBuff('magic_cannon_charge') ? 700 : 0,é­”æ³•ç‚®å……èƒ½/é‡Šæ”¾é€»è¾‘ï¼Œé€šè¿‡è¡Œä¸ºæ ‘å®ç°ã€‚,"{""name"":""magic-cannon-logic"",""desc"":""é­”æ³•ç‚®æŠ€èƒ½æ‰§è¡Œè¡Œä¸ºæ ‘ï¼ˆåŸºäºé€šç”¨æ¨¡æ¿ï¼Œåœ¨å‘åŠ¨é˜¶æ®µä½¿ç”¨ Switch åˆ†æ”¯ï¼‰"",""root"":{""id"":1,""name"":""Sequence"",""desc"":""æŠ€èƒ½æ‰§è¡Œä¸»æµç¨‹"",""children"":[{""id"":1,""name"":""Let"",""desc"":""åˆå§‹åŒ– magicCannon å¯¹è±¡ï¼ˆä»…åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶åˆå§‹åŒ–ï¼‰"",""args"":{""value"":{""phase"":0,""stacks"":0,""hasGauge"":false}},""output"":[""magicCannon""]},{""id"":5,""name"":""RunPipeline"",""desc"":""è®¡ç®—æŠ€èƒ½æ¶ˆè€—"",""args"":{""pipelineName"":""skill.cost.calculate""}},{""id"":6,""name"":""RunPipeline"",""desc"":""è®¡ç®—æŠ€èƒ½åŠ¨ä½œæ—¶é•¿"",""args"":{""pipelineName"":""skill.motion.calculate""}},{""id"":7,""name"":""IfElse"",""desc"":""å‰æ‘‡é˜¶æ®µï¼ˆå¦‚æœå­˜åœ¨ï¼‰"",""children"":[{""id"":8,""name"":""Check"",""desc"":""æ£€æŸ¥æ˜¯å¦å­˜åœ¨å‰æ‘‡"",""args"":{""value"":""currentSkillStartupFrames > 0""}},{""id"":9,""name"":""Sequence"",""desc"":""æ‰§è¡Œå‰æ‘‡é˜¶æ®µ"",""children"":[{""id"":10,""name"":""RunPipeline"",""desc"":""å¯åŠ¨å‰æ‘‡åŠ¨ç”»"",""args"":{""pipelineName"":""animation.startup.start""}},{""id"":11,""name"":""RunPipeline"",""desc"":""è°ƒåº¦å‰æ‘‡ç»“æŸäº‹ä»¶"",""args"":{""pipelineName"":""event.startup.schedule""}},{""id"":12,""name"":""WaitForEvent"",""desc"":""ç­‰å¾…å‰æ‘‡ç»“æŸé€šçŸ¥"",""args"":{""event"":""æ”¶åˆ°å‰æ‘‡ç»“æŸé€šçŸ¥""}}]},{""id"":13,""name"":""JustSuccess"",""desc"":""è·³è¿‡å‰æ‘‡é˜¶æ®µ""}]},{""id"":14,""name"":""IfElse"",""desc"":""è“„åŠ›é˜¶æ®µï¼ˆå¦‚æœå­˜åœ¨ï¼‰"",""children"":[{""id"":15,""name"":""Check"",""desc"":""æ£€æŸ¥æ˜¯å¦å­˜åœ¨è“„åŠ›"",""args"":{""value"":""currentSkillChargingFrames > 0""}},{""id"":16,""name"":""Sequence"",""desc"":""æ‰§è¡Œè“„åŠ›é˜¶æ®µ"",""children"":[{""id"":17,""name"":""RunPipeline"",""desc"":""å¯åŠ¨è“„åŠ›åŠ¨ç”»"",""args"":{""pipelineName"":""animation.charging.start""}},{""id"":18,""name"":""RunPipeline"",""desc"":""è°ƒåº¦è“„åŠ›ç»“æŸäº‹ä»¶"",""args"":{""pipelineName"":""event.charging.schedule""}},{""id"":19,""name"":""WaitForEvent"",""desc"":""ç­‰å¾…è“„åŠ›ç»“æŸé€šçŸ¥"",""args"":{""event"":""æ”¶åˆ°è“„åŠ›ç»“æŸé€šçŸ¥""}}]},{""id"":20,""name"":""JustSuccess"",""desc"":""è·³è¿‡è“„åŠ›é˜¶æ®µ""}]},{""id"":21,""name"":""IfElse"",""desc"":""å’å”±é˜¶æ®µï¼ˆå¦‚æœå­˜åœ¨ï¼‰"",""children"":[{""id"":22,""name"":""Check"",""desc"":""æ£€æŸ¥æ˜¯å¦å­˜åœ¨å’å”±"",""args"":{""value"":""currentSkillChantingFrames > 0""}},{""id"":23,""name"":""Sequence"",""desc"":""æ‰§è¡Œå’å”±é˜¶æ®µ"",""children"":[{""id"":24,""name"":""RunPipeline"",""desc"":""å¯åŠ¨å’å”±åŠ¨ç”»"",""args"":{""pipelineName"":""animation.chanting.start""}},{""id"":25,""name"":""RunPipeline"",""desc"":""è°ƒåº¦å’å”±ç»“æŸäº‹ä»¶"",""args"":{""pipelineName"":""event.chanting.schedule""}},{""id"":26,""name"":""WaitForEvent"",""desc"":""ç­‰å¾…å’å”±ç»“æŸäº‹ä»¶"",""args"":{""event"":""æ”¶åˆ°å’å”±ç»“æŸäº‹ä»¶""}}]},{""id"":27,""name"":""JustSuccess"",""desc"":""è·³è¿‡å’å”±é˜¶æ®µ""}]},{""id"":27,""name"":""Sequence"",""desc"":""å‘åŠ¨é˜¶æ®µ"",""children"":[{""id"":28,""name"":""RunPipeline"",""desc"":""å¯åŠ¨å‘åŠ¨åŠ¨ç”»"",""args"":{""pipelineName"":""animation.action.start""}},{""id"":29,""name"":""RunPipeline"",""desc"":""åº”ç”¨æŠ€èƒ½æ•ˆæœ"",""args"":{""pipelineName"":""skill.effect.apply""}},{""id"":29,""name"":""RunPipeline"",""desc"":""æ£€æŸ¥é­”æ³•ç‚®å……èƒ½ Buff çŠ¶æ€ï¼Œè·å– buffExists å˜é‡"",""args"":{""pipelineName"":""buff.check"",""params"":{""buffId"":""magic_cannon_charge""}}},{""id"":291,""name"":""Log"",""args"":{""message"":""Switch å‰ï¼šé­”æ³•ç‚®å……èƒ½ Buff æ˜¯å¦å­˜åœ¨"",""level"":""log""},""input"":[""buffExists""]},{""id"":30,""name"":""Switch"",""desc"":""æ ¹æ® Buff çŠ¶æ€åˆ†æ”¯æ‰§è¡Œä¸åŒé€»è¾‘"",""children"":[{""id"":31,""name"":""Case"",""children"":[{""id"":32,""name"":""Check"",""args"":{""value"":""!buffExists""}},{""id"":33,""name"":""Sequence"",""desc"":""å……èƒ½é˜¶æ®µé€»è¾‘"",""children"":[{""id"":34,""name"":""Log"",""args"":{""message"":""é­”æ³•ç‚®å……èƒ½é˜¶æ®µå¼€å§‹"",""level"":""log""}},{""id"":35,""name"":""Sequence"",""desc"":""è¿›å…¥å……èƒ½çŠ¶æ€å¹¶è®°å½•å……èƒ½ç™¾åˆ†æ¯”å˜åŒ–"",""children"":[{""id"":351,""name"":""Calculate"",""args"":{""value"":""magicCannon && magicCannon.stacks ? magicCannon.stacks : 0""},""output"":[""oldStacks""]},{""id"":352,""name"":""Let"",""desc"":""è¿›å…¥å……èƒ½çŠ¶æ€ï¼ˆphase=1, hasGauge=true, stacks=0ï¼‰"",""args"":{""value"":{""phase"":1,""stacks"":0,""hasGauge"":true}},""output"":[""magicCannon""]},{""id"":353,""name"":""Calculate"",""args"":{""value"":""0 - oldStacks""},""output"":[""stacksChange""]},{""id"":354,""name"":""Log"",""args"":{""message"":""ğŸ”‹ é­”æ³•ç‚®å……èƒ½è®¡æ•°å™¨å˜åŒ–"",""level"":""log""}},{""id"":355,""name"":""Log"",""args"":{""message"":""  æ—§å€¼ï¼š"",""level"":""log""},""input"":[""oldStacks""]},{""id"":356,""name"":""Calculate"",""args"":{""value"":""0""},""output"":[""newStacks""]},{""id"":357,""name"":""Log"",""args"":{""message"":""  æ–°å€¼ï¼š"",""level"":""log""},""input"":[""newStacks""]},{""id"":358,""name"":""Log"",""args"":{""message"":""  å˜åŒ–é‡ï¼š"",""level"":""log""},""input"":[""stacksChange""]}]},{""id"":36,""name"":""Log"",""args"":{""message"":""é­”æ³•ç‚®è¿›å…¥å……èƒ½çŠ¶æ€ï¼ˆå……èƒ½ç™¾åˆ†æ¯”å°†é€šè¿‡å…¶ä»–é­”æ³•æŠ€èƒ½å¢åŠ ï¼Œä¸Šé™200ï¼‰"",""level"":""log""}},{""id"":37,""name"":""RunPipeline"",""desc"":""æ·»åŠ é­”æ³•ç‚®å……èƒ½ Buff"",""args"":{""pipelineName"":""buff.add"",""params"":{""buffId"":""magic_cannon_charge"",""buffName"":""é­”æ³•ç‚®å……èƒ½"",""duration"":-1,""variables"":{""chargeCounter"":0},""effects"":[{""type"":""pipeline"",""pipeline"":""frame.update"",""stage"":"""",""logic"":""\n                                    const current = ctx.getBuffVar('magic_cannon_charge', 'chargeCounter');\n                                    const initialFrame = ctx.getBuffVar('magic_cannon_charge', 'initialFrame') || ctx.currentFrame;\n                                    const frameInterval = current < 100 ? 60 : 120; \n                                    const framesSinceInitial = ctx.currentFrame - initialFrame;\n                                    \n                                    \n                                    if (framesSinceInitial > 0 && framesSinceInitial % frameInterval === 0) {\n                                      const increment = 1;\n                                      ctx.setBuffVar('magic_cannon_charge', 'chargeCounter', Math.min(current + increment, 200));\n                                    }\n                                  "",""priority"":0},{""type"":""pipeline"",""pipeline"":""skill.effect.apply"",""stage"":""æŠ€èƒ½æ•ˆæœåº”ç”¨"",""logic"":""\n                                    const chargeSkills = ['æ³•æœ¯/é£ç®­', 'æ³•æœ¯/é•¿æª', 'æ³•æœ¯/é­”æ³•æª', 'ç‰µå¼•/å¼•çˆ†', 'éšœå£', 'æ³•æœ¯/æš´é£', 'æ³•æœ¯/æ¯ç­', 'æ³•æœ¯/ç»ˆç»“', 'æ³•æœ¯/çˆ†èƒ½', 'ç¥ˆç¥·', 'ç¥åœ£å…‰è¾‰', 'ç©ºçµéšœå£', 'è¿ç”¨ç»“ç•Œ', 'ç©ºçµé—ªç„°', 'å¤è‹', 'åå‡»åŠ¿åŠ›', 'å¤©å¤–é•¿æª'];\n                                    if (chargeSkills.includes(ctx.currentSkillName)) {\n                                      const current = ctx.getBuffVar('magic_cannon_charge', 'chargeCounter');\n                                      const castTime = ctx.currentSkillChantingFrames || 0;\n                                      const skillLv = ctx.currentSkill?.lv || 0;\n                                      const castSpeedBoost = 0;\n                                      const increment = castTime * skillLv + 80 * castSpeedBoost;\n                                      ctx.setBuffVar('magic_cannon_charge', 'chargeCounter', Math.min(current + increment, 200));\n                                      console.log('ğŸ”‹ é­”æ³•ç‚®å……èƒ½:', current, '->', Math.min(current + increment, 200));\n                                    }\n                                  "",""priority"":0}]}}},{""id"":37,""name"":""Sequence"",""desc"":""è°ƒè¯•ï¼šæ˜¾ç¤ºå……èƒ½åçš„ magicCannon çŠ¶æ€å’Œå……èƒ½ç™¾åˆ†æ¯”"",""children"":[{""id"":371,""name"":""Calculate"",""args"":{""value"":""magicCannon ? magicCannon.phase : -1""},""output"":[""phaseAfterCharge""]},{""id"":372,""name"":""Log"",""args"":{""message"":""å……èƒ½å magicCannon.phase"",""level"":""log""},""input"":[""phaseAfterCharge""]},{""id"":373,""name"":""Calculate"",""args"":{""value"":""magicCannon && magicCannon.stacks ? magicCannon.stacks : 0""},""output"":[""stacksAfterCharge""]},{""id"":374,""name"":""Log"",""args"":{""message"":""ğŸ”‹ å½“å‰å……èƒ½ç™¾åˆ†æ¯”ï¼ˆstacksï¼Œä¸Šé™200ï¼‰"",""level"":""log""},""input"":[""stacksAfterCharge""]}]}]}]},{""id"":37,""name"":""Case"",""children"":[{""id"":38,""name"":""Check"",""args"":{""value"":""buffExists""}},{""id"":39,""name"":""Sequence"",""desc"":""é‡Šæ”¾é˜¶æ®µé€»è¾‘"",""children"":[{""id"":40,""name"":""Log"",""args"":{""message"":""é­”æ³•ç‚®é‡Šæ”¾é˜¶æ®µï¼šæ¶ˆè€—å……èƒ½é€ æˆä¼¤å®³"",""level"":""log""}},{""id"":41,""name"":""RunPipeline"",""desc"":""æ£€æŸ¥ Buff å¹¶è·å–å……èƒ½è®¡æ•°å™¨"",""args"":{""pipelineName"":""buff.check"",""params"":{""buffId"":""magic_cannon_charge""}}},{""id"":42,""name"":""Calculate"",""args"":{""value"":""(self.statContainer.getValue(\""atk.m\"") + 700 + 10 * chargeCounter) * (300 * chargeCounter + self.statContainer.getValue(\""int\"") * Math.min(chargeCounter, 5))""},""output"":[""damage""]},{""id"":43,""name"":""RunPipeline"",""desc"":""ç§»é™¤ Buff å¹¶è·å–å……èƒ½è®¡æ•°å™¨"",""args"":{""pipelineName"":""buff.remove"",""params"":{""buffId"":""magic_cannon_charge""}}},{""id"":44,""name"":""Log"",""args"":{""message"":""è®¡ç®—ä¼¤å®³å®Œæˆï¼Œä¼¤å®³å€¼"",""level"":""log""},""input"":[""damage""]},{""id"":45,""name"":""Log"",""args"":{""message"":""é‡Šæ”¾æ—¶å……èƒ½ç™¾åˆ†æ¯”ï¼ˆchargeCounterï¼‰"",""level"":""log""},""input"":[""chargeCounter""]}]}]},{""id"":44,""name"":""Case"",""children"":[{""id"":45,""name"":""JustSuccess"",""desc"":""é»˜è®¤åˆ†æ”¯æ¡ä»¶ï¼ˆæ€»æ˜¯æˆåŠŸï¼‰""},{""id"":46,""name"":""Sequence"",""desc"":""é»˜è®¤åˆ†æ”¯ï¼šphase æœªè®¾ç½®æˆ–ä¸º 0ï¼Œè¿›å…¥å……èƒ½çŠ¶æ€"",""children"":[{""id"":461,""name"":""Log"",""args"":{""message"":""é­”æ³•ç‚®ï¼šé¦–æ¬¡ä½¿ç”¨ï¼Œè¿›å…¥å……èƒ½çŠ¶æ€"",""level"":""log""}},{""id"":462,""name"":""Let"",""desc"":""è¿›å…¥å……èƒ½çŠ¶æ€"",""args"":{""value"":{""phase"":1,""stacks"":0,""hasGauge"":true}},""output"":[""magicCannon""]}]}]}]},{""id"":48,""name"":""RunPipeline"",""desc"":""è°ƒåº¦å‘åŠ¨ç»“æŸäº‹ä»¶"",""args"":{""pipelineName"":""event.action.schedule""}},{""id"":49,""name"":""WaitForEvent"",""desc"":""ç­‰å¾…å‘åŠ¨ç»“æŸé€šçŸ¥"",""args"":{""event"":""æ”¶åˆ°å‘åŠ¨ç»“æŸé€šçŸ¥""}}]}]}}",null,MagicCannonId
