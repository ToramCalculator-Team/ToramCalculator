if(是魔法攻击) {
    无敌判定，
    格挡倍率计算，
    实际伤害计算，
    应用伤害，
    异常抵抗获取，
    if(处在抵抗时间) {

    } else {
        异常施加成功率计算，
        异常施加判定
    }
} else {
    无敌判定，
    闪躲判定，
    暴击判定，
    回避判定，
    伤害计算，
    格挡判定，
    格挡后伤害计算，
    伤害应用，
}

涉及管线：[
    {
        name: 格挡倍率计算，
        actions:[
        格挡值获取，
        格挡率计算，
        格挡判定，
        格挡力计算，
        格挡倍率计算
    ]},{[

    ]}
]